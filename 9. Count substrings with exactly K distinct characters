#include <stdio.h>
#include <string.h>

int atMostK(char s[], int k) {
    int n = strlen(s), left = 0, count = 0;
    int freq[256] = {0}, distinct = 0;
    for (int right = 0; right < n; right++) {
        if (freq[s[right]] == 0) distinct++;
        freq[s[right]]++;
        while (distinct > k) {
            freq[s[left]]--;
            if (freq[s[left]] == 0) distinct--;
            left++;
        }
        count += right - left + 1;
    }
    return count;
}
int substrCountKDistinct(char s[], int k) {
    return atMostK(s, k) - atMostK(s, k - 1);
}
int main() {
    char s[] = "abcba";
    int k = 2;
    printf("%d", substrCountKDistinct(s, k));
    return 0;
}
